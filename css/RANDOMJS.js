var getJSON=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="json",n.onload=function(){var e=n.status;t(200===e?null:e,n.response)},n.send()},urlForTenant="/api/subscribers/detail?platform=BROWSER",urlForActiveSubscriber="/api/subscribers/payments?platform=BROWSER&lang=EN&tenant=AMB_EE&maxResults=100&channel[]=POSTPAID",checkIfUserSubscribed=function(){getJSON(urlForTenant,function(e,t){if(null!==e)ga("send","event","Popup test","new user"),localStorage.setItem("newUser",!0),console.log(!0,t);else{if(!t)return ga("send","event","Popup test","new user"),localStorage.setItem("newUser",!0),void console.log(!0,t);"AMB_LT"==t.tenant||"AMB_LV"==t.tenant||"AMB_EE"==t.tenant?getJSON(urlForActiveSubscriber,function(e,t){if(null!==e)ga("send","event","Popup test","new user"),localStorage.setItem("newUser",!0),console.log(!0,t);else{t.items.length||(ga("send","event","Popup test","new user"),localStorage.setItem("newUser",!0),console.log(!0,t));for(var n=0;n<t.items.length;++n){if(!t.items[n].till)return localStorage.setItem("newUser",!1),console.log(!1,t),void ga("send","event","Popup test","active subscriber")}for(var o=0;o<t.items.length;++o){var a=t.items[n-1];if(new Date(a.till)<new Date)return ga("send","event","Popup test","new user"),localStorage.setItem("newUser",!0),void console.log(!0,t);localStorage.setItem("newUser",!1),console.log(!1,t),ga("send","event","Popup test","active subscriber")}}}):(localStorage.setItem("newUser",!1),console.log(!1,t),ga("send","event","Popup test","active subscriber"))}})};checkIfUserSubscribed(),(()=>{let e=history.pushState;history.pushState=function(){let t=e.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange")),t};let t=history.replaceState;history.replaceState=function(){let e=t.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange")),e},window.addEventListener("popstate",()=>{window.dispatchEvent(new Event("locationchange"))})})(),window.addEventListener("locationchange",function(){checkIfUserSubscribed()});var bundlesLt={topInBaltics:"TOP BALTIJOS ŠALYSE",allInclusive:"Viskas įskaičiuota",price:"14,99 Eur / mėn.",tvChannelsIncluded:"Įtraukta TV kanalų (55)",discoveryFree:"Discovery+ NEMOKAMAI",title1:"Disney ir Paramount+ hitai",title2:"Išskirtinis Go3 originalus turinys",title3:"Nesibaigiantis sporto turinys",title4:"Tiesioginiai televizijos kanalai ir 7 dienų archyvas",startWatchingNow:"Pradėkite žiūrėti jau dabar!",cancelAnytime:"Atšaukite bet kada",adultContent:{title:"Turinys suaugusiems",price:"17,98 Eur / mėn."},nbaContent:{title:"NBA League Pass prenumerata",price:"23,39 Eur / mėn."}},bundlesEn={topInBaltics:"TOP IN BALTICS",allInclusive:"All Inclusive",price:"14.99 € / month",tvChannelsIncluded:"TV channels included (55)",discoveryFree:"Discovery+ for FREE",title1:"Disney & Paramount+ blockbusters",title2:"Exclusive original Go3 content",title3:"Unlimited sports content",title4:"Live TV & 7 days TV Archive",startWatchingNow:"Start watching now!",cancelAnytime:"Cancel anytime",adultContent:{title:"Adult content included",price:"17.98 € / month"},nbaContent:{title:"NBA League Pass subscription",price:"23.39 € / month"}},bundlesRu={topInBaltics:"ТОП В БАЛТИИ",allInclusive:"Все включено",price:"14.99 € / месяц",tvChannelsIncluded:"ТВ каналы включены (55)",discoveryFree:"discovery+ БЕСПЛАТНО",title1:"Disney & Paramount+ блокбастеры",title2:"Эксклюзивный оригинальный Go3 контент",title3:"Безлимитный спорт контент",title4:"ТВ и 7 дневный архив каналов",startWatchingNow:"Начинайте смотреть прямо сейчас!",cancelAnytime:"Отключите в любое время",adultContent:{title:"Пакет для взрослых",price:"17.98 € / месяц"},nbaContent:{title:"Подписка NBA League Pass",price:"23.39 € / месяц"}},setButtonText=function(){return'"LT"'==localStorage.getItem("language")?"ŽIŪRĖTI":'"EN"'==localStorage.getItem("language")?"WATCH":'"RU"'==localStorage.getItem("language")?"СМОТРЕТЬ":void 0};function setCookie(e,t,n){var o="";if(n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),o="; expires="+a.toUTCString()}document.cookie=e+"="+(t||"")+o+"; path=/"}function getCookie(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null}getJSON=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="json",n.onload=function(){var e=n.status;t(200===e?null:e,n.response)},n.send()};var pageBundleId,getProductBundleIds=function(){var e,t=window.location.href,n=t.match(/\d+/g)[t.match(/\d+/g).length-1],o=t.match(/\bserial\b/),a=t.match(/\bvod\b/),c=t.match(/\blive\b/);o&&(e="https://go3.lt/api/products/vods/serials/"+t.match(/\bserial-\b.[0-9]+/)[0].match(/[0-9]+/)+"?platform=BROWSER&lang=EN&tenant=AMB_LT");(a&&(e="https://go3.lt/api/products/vods/"+n+"?platform=BROWSER&lang=EN&tenant=AMB_LT"),c)&&(e="https://go3.lt/api/products/lives/"+t.match(/\blive-\b.[0-9]+/)[0].match(/[0-9]+/)+"?platform=BROWSER&lang=EN&tenant=AMB_LT");getJSON(e,function(e,t){if(null!==e)console.table("Something went wrong: "+e);else{var n=t.bundles,o=[];for(i=0;i<n.length;i++)i!=n.length-1?o+=n[i].id+",":o+=n[i].id;localStorage.setItem("bundleIds","[2958734,2935377]"),"989311,989317,989318,989339,2958734"==o&&localStorage.setItem("bundleIds","[2958734,2935377,3411405]"),"2218494"==o&&localStorage.setItem("bundleIds","[2958734,2935377,2218494]"),pageBundleId=o}})},generateModal=function(){pageBundleId="",getProductBundleIds();var e=window.setInterval(function(){var t;if('"LT"'==localStorage.getItem("language")?t=bundlesLt:'"EN"'==localStorage.getItem("language")?t=bundlesEn:'"RU"'==localStorage.getItem("language")?t=bundlesRu:'"LV"'==localStorage.getItem("language")?t=bundlesLv:'"EE"'==localStorage.getItem("language")&&(t=bundlesEe),clearInterval(e),pageBundleId&&!document.querySelector(".ab-test-modal")){var n=t.price,o="<span hidden>";if(2218494==pageBundleId)n=t.adultContent.price,o='<div class="c-feature__item"><i class="o-icon c-feature__icon u-color-accent o-icon--check"></i><span class="o-typography__subtitle3 c-feature__label">'+t.adultContent.title+"</span></div>";if("989311,989317,989318,989339,2958734"==pageBundleId)n=t.nbaContent.price,o='<div class="c-feature__item"><i class="o-icon c-feature__icon u-color-accent o-icon--check"></i><span class="o-typography__subtitle3 c-feature__label">'+t.nbaContent.title+"</span></div>";var a=t.topInBaltics,i=t.allInclusive,c=t.tvChannelsIncluded,l=t.discoveryFree,r=t.title1,s=t.title2,d=t.title3,u=t.title4,v=t.startWatchingNow,p=t.cancelAnytime,g=document.createElement("div");g.setAttribute("class","ab-test-modal"),g.innerHTML='<div class="modal-overflow"></div><div class="modal-inner"> <div class="modal-top-in-baltics">'+a+'</div><div class="modal-close"></div><div class="modal-recommended"><div class="modal-title">'+i+'</div><div class="modal-price">'+n+'</div></div><div class="modal-channels">'+c+'</div><div class="c-feature__column"><div class="c-feature__item"><i class="o-icon c-feature__icon u-color-accent o-icon--gift"></i><span class="o-typography__subtitle3 c-feature__label">'+l+'</span></div><div class="c-feature__item"><i class="o-icon c-feature__icon u-color-accent o-icon--check"></i><span class="o-typography__subtitle3 c-feature__label">'+r+'</span></div><div class="c-feature__item"><i class="o-icon c-feature__icon u-color-accent o-icon--check"></i><span class="o-typography__subtitle3 c-feature__label">'+s+'</span></div><div class="c-feature__item"><i class="o-icon c-feature__icon u-color-accent o-icon--check"></i><span class="o-typography__subtitle3 c-feature__label">'+d+'</span></div><div class="c-feature__item"><i class="o-icon c-feature__icon u-color-accent o-icon--check"></i><span class="o-typography__subtitle3 c-feature__label">'+u+"</span></div>"+o+'</div><button class="o-button o-button--primary modal-subscribe-button"> <span class="o-typography__label o-button__label u-bold"> '+v+' </span> </button><div class="modal-cancelAnytime">'+p+"</div>",document.querySelector("body").append(g);var m=document.querySelector(".modal-close"),b=document.querySelector(".modal-close, .modal-overflow "),h=document.querySelector(".modal-subscribe-button");m.addEventListener("click",function(){document.querySelector(".ab-test-modal").remove()}),b.addEventListener("click",function(){document.querySelector(".ab-test-modal").remove()}),h.addEventListener("click",function(){document.querySelector(".ab-test-modal").remove(),window.location="https://go3.lt/subscriber/checkout"});var f=window.location.href,_=window.setInterval(function(){f!=window.location.href&&(clearInterval(_),document.querySelector(".ab-test-modal").remove())},1e3)}},200)};setInterval(()=>{if("true"==localStorage.getItem("newUser")&&(window.location.href.indexOf("movies")>-1||window.location.href.indexOf("paramount")>-1)){var e=document.querySelector(" div.c-highlight__wrapper > div.c-highlight__buttons ");if(e&&!document.querySelector(".changed-button")){e.classList.add("changed-button");var t=e.querySelector(".o-button--primary");if(t&&(t.textContent.includes("BUY")||t.textContent.includes("PIRKTI")||t.textContent.includes("КУПИТЬ"))){t.remove();var n=document.createElement("div");n.setAttribute("class","o-button o-button--primary ab-test-button"),n.innerHTML=setButtonText()+' <div class="arrow-right"></div>',e.prepend(n),document.querySelector(".ab-test-button").addEventListener("click",function(){getProductBundleIds(),generateModal()})}}}},500),setInterval(()=>{if("true"==localStorage.getItem("newUser")&&(window.location.href.indexOf("serial")>-1||window.location.href.indexOf("go3_extra")>-1||window.location.href.indexOf("ghost")>-1||window.location.href.indexOf("paramount/")>-1||window.location.href.indexOf("discoveryplus/")>-1)){var e=document.querySelector(" div.c-highlight__wrapper > div.c-highlight__buttons ");if(!document.querySelector("div.c-highlight__buttons > div:nth-child(1) > i.o-icon--play")&&e&&!document.querySelector(".changed-button")){e.classList.add("changed-button");var t=document.createElement("div");t.setAttribute("class","o-button o-button--primary ab-test-button"),t.innerHTML=setButtonText()+' <div class="arrow-right"></div>',e.prepend(t),e.querySelector(".ab-test-button").addEventListener("click",function(){getProductBundleIds(),generateModal()}),document.querySelector("div.c-highlight__buttons.changed-button > div:nth-child(2)").remove()}if(document.querySelectorAll("#app > div.app-container > div > section.c-section.c-section--two-lines > div > div.c-section__container.js-section-container > div.c-section__wrapper > div")){var n=document.createElement("div");n.setAttribute("class","ab-test-button"),n.innerHTML='<div class="arrow-right"></div>',setInterval(()=>{document.querySelectorAll("#app > div.app-container > div > section.c-section.c-section--two-lines > div > div.c-section__container.js-section-container > div.c-section__wrapper > div").forEach(function(e){e.querySelector(".ab-test-button")||e.querySelector("i.o-icon.o-button__icon.o-icon--play-circle.o-icon--xlarge")||(e.prepend(n.cloneNode(!0)),e.querySelector(".ab-test-button").addEventListener("click",function(){getProductBundleIds(),generateModal()}))})},1e3)}}},500),setInterval(()=>{if("true"==localStorage.getItem("newUser")&&window.location.href.indexOf("live_tv")>-1){var e=document.querySelectorAll("div.c-live-detail__preview.c-live-detail__preview--channel > div.c-live-detail__cover.u-desktop-only"),t=document.querySelectorAll("a.is-selected.js-current-program > div.c-epg-program-detail.u-mobile-only > div");if(e){var n=document.createElement("div");n.setAttribute("class","o-button o-button--primary ab-test-button"),n.innerHTML=setButtonText()+' <div class="arrow-right"></div>',e.forEach(function(e){e.querySelector(".ab-test-button")||(e.prepend(n),e.querySelector(".ab-test-button").addEventListener("click",function(){getProductBundleIds(),generateModal()}))}),t.forEach(function(e){e.querySelector(".ab-test-button")||(e.prepend(n.cloneNode(!0)),e.querySelector(".ab-test-button").addEventListener("click",function(){getProductBundleIds(),generateModal()}))})}}},500);var untilityInterval=window.setInterval(()=>{var e=document.querySelector(".o-modal--upsell-popup");e&&"true"==localStorage.getItem("newUser")&&e.querySelector(".o-modal__close").click();var t=document.querySelector("#app > div.app-container > section > div > div.o-page__column.o-page__column--right > form > div.o-form__group.u-mb-20 > div:nth-child(1) > button");t&&t.addEventListener("click",function(){checkIfUserSubscribed(),setTimeout(()=>{checkIfUserSubscribed()},2e3)})},500),addClassToBody=window.setInterval(()=>{var e=document.querySelector("body");e&&"true"==localStorage.getItem("newUser")?e.classList.contains("ab-visible")||e.classList.add("ab-visible"):e&&"false"==localStorage.getItem("newUser")&&e.classList.contains("ab-visible")&&e.classList.remove("ab-visible")});